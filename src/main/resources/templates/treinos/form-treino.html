<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle} ?: 'Formulário de Treino'"></title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}">
</head>
<body>
<div class="form-container">
    <h1 th:text="${pageTitle} ?: 'Formulário de Treino'">Formulário de Treino</h1>
    <h3 th:if="${aluno != null}" th:text="'Para o aluno: ' + ${aluno.nome} + ' (ID: ' + ${aluno.id} + ')'"></h3>

    <div th:if="${errorMessage}" class="message error" th:text="${errorMessage}"></div>

    <form th:if="${treinoId == null && aluno != null}"
          th:action="@{/web/alunos/{alunoId}/treinos/criar(alunoId=${aluno.id})}"
          method="post" th:object="${treinoForm}">
        <div th:replace="~{treinos/_formFieldsTreino :: formFieldsTreino}"></div>
        <div>
            <button type="submit">Cadastrar Treino</button>
        </div>
    </form>

    <form th:if="${treinoId != null && aluno != null}"
          th:action="@{/web/alunos/{alunoId}/treinos/atualizar/{treinoId}(alunoId=${aluno.id}, treinoId=${treinoId})}"
          method="post" th:object="${treinoForm}">
        <div th:replace="~{treinos/_formFieldsTreino :: formFieldsTreino}"></div>
        <div>
            <button type="submit">Atualizar Treino</button>
        </div>
    </form>

    <div th:if="${aluno == null}">
        <p class="message error">Aluno não encontrado ou não especificado. Não é possível gerenciar treinos.</p>
    </div>

    <div class="nav-links" style="margin-top: 20px;">
        <a th:if="${aluno != null}" th:href="@{/web/alunos/{alunoId}/treinos(alunoId=${aluno.id})}">Voltar para Treinos do Aluno</a> <br/>
        <a th:href="@{/web/alunos}">Voltar para Lista de Alunos</a>
    </div>
</div>
</body>
</html>